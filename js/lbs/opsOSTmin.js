o={
  a:u.new('a'),
  ap:'application/',
  asset:asset,
  Cs:[
    'xyzxyz'.split(''),
    [0,0,0,0,0,0],
    [0,0,0,0,0,0]],
  ŒµŒª:'Œ±Œ≤Œ≥Œ¥ŒµŒ∂Œ∑Œ∏Œπ'.split(''),
  hs:{
    ch:[],
    cp:u.new('input',{onchange:u.f("u.sty('.c{background:'+(u.pc=this.value)+';src:0'),u.d.cookie='c3d.c='+u.pc"),type:/Trident/.test(h.nv.userAgent)?'':'color',value:u.pc}),
    fn:[
      u.f('o.hs.cp.click()'),
      u.f('o.this=this,o.iz.click()'),
      u.f('o.exp()'),
      u.f("open(location.href+'support','_new')"),
      u.f('u.shift(setTimeout(u.out,100))')],
    slot:u.f('n,s',"u.ap(u.new('span',{innerHTML:o.mez(s)+' | '+n}),Â∏à‰∫å.children[0])"),
    tt:t.eval(
      'Selecciona el Color Preferido_'+
      'A√±ade una Casa zip\n               Z_'+
      'Guarda la Casa que esta al frente de la C√°mara\n                                   G_'+
      'Abre la P√°gina de Informaci√≥n\n                      I_'+
      'Bloquea la Sesi√≥n\n             B_')},
  img:{
    _id:u.s('ho br do fl gl me wa wi wo'),
    en:u.s('user brick door floor glass metal wall window wood'),
    es:u.s('usuario ladrillo puerta piso vidrio metal pared ventana madera'),
    add:function(){
      o.add(o.mn.up?
        this.src
        :this.src.split(/.*\/(.*)\./)[1])}},
  mt:new T.MeshBasicMaterial,
  ob3:new T.Object3D,
  S:510,
  Œ†:Math.PI,
  œÄ:Math.PI/2,
  pl:u.f('a,b','return new T.PlaneGeometry(a,b)'),
  URL:u.f('b','return URL.createObjectURL(b)'),
  ae:u.f('e,a','for(var i in a)e.addEventListener(i,a[i])'),
  tn:{
    blob:[]},
  tdp:function(h,s){
    return{
      curveSegments:1,
      font:'janda manatee solid',
      height:h,
      size:s}},
  lr:function(c,r){
    var s=c.style,p=Number(s.left.slice(0,-1))
    this.r||r?
      Math.abs(p/100)+1<c.childElementCount/10&&(s.left=p-100+'%')
      :p&&(s.left=p+100+'%')},
  m:[[1e6,'MB'],[1e3,'KB'],[1,'bytes']],
  mez:function(n){var i,d//number
    for(i in o.m)if(n>(d=o.m[i][0]))break
    return Number((n/d).toFixed(2))+' '+o.m[i][1]},
  e:u.s('‚•Ä üëÅ ‚•Å ÓÑ£ Óáô üìπ'),
  op:[
    u.f('m.r(m.œÅŒ∫=0)'),
    m.act,
    u.f('m.rt(2)'),
    dr.act,
    function(i){
      i=u.d[this.i]
      u[i?'d':'b'][i?this.c:this.r]()},
    function(){var p=m.P,r=m.c,v=o.Cs,i,fC,sC,Œ±,Œµ
      this.innerHTML=this.innerHTML=='üé•'?(
        fC=1,
        sC=2,
        'üìπ')
        :(fC=2,
        sC=1,
        'üé•')
      for(i in v[0]){
        Œµ=i<3?p:r,Œ±=v[0][i]
        v[fC][i]=Œµ[Œ±]
        Œµ[Œ±]=v[sC][i]}},
    u.f('o.rst(0)'),
    u.f('o.rst(1)')],
  vlz:function(v){
    (v=this.value)?
      m.i=v
      :this.value=m.i},
  zhCL:'Â∑¶‰∏äÊùÉ'.split(''),
  in:function(a,f,m){
    return u.new(
      'input',
      {type:'file',
      accept:a,
      multiple:m,
      onchange:u.f(f+'(this.files)')})},
  rst:function(o){
    var dc=Âú∞ÁÇπ.children
    dc[1].children[o].value=dc[2].children[o].value=dc[3].children[o].value=0
    c[o?'rotation':'position'].set(0,0,0)},
  mn:function(b){
    var i=0,D,s=u.s('üåÑ ÓÑá ‚§¥ ‚§ø üîò ‚§æ ‚§µ'),e
    u.ap(D=o.mn=u.new('div',{id:'opsMenu',className:'no'}),h.tls)
    D.rt=u.f('xy,p','o.mn.o&&(o.mn.o.rotation[xy]=o.mn.o.rotation[xy]+o.œÄ/2*p)')
    D.—Ñ=u.f('s','o.mn.o.material.map=T.ImageUtils.loadTexture(s)')
    D.fn=[
      u.f('o.i.click(),o.mn.up=1'),
      function(O){
        u.sc(D,'no'),
        (O=o.mn.o)&&(
          O.parent.id==o.added.id?
            o.added.remove(O)
            :t.s.children[1].remove(O),
          o.mn.up=0)},
        'x',
        'y',
        u.f('o.mn.o&&o.mn.o.rotation.set(0,0,0)'),
        'y',
        'x']
    for(i in s){
      u.ap(e=u.new(b,{innerHTML:s[i]}),D)
      e.onclick=i<2||i==4?
        D.fn[i]
        :u.f('o.mn.rt("'+D.fn[i]+'",'+(i<5?'-':'')+'1)')
      i++}},
  usrAgnt:{Chrome:'webkit',Trident:'ms',Firefox:'moz',f:'FullScreen'},
  rb:function(F){
    if(F.length){
      var x,i=0,I,a,—Ñ,b=o.tn.blob,de
      x=setInterval(function(){de=1,f=F[i]
        for(I in b)if(b[I].sz==f.size&&!(de=0))break
        o.add(
          de?(
            —Ñ=o.URL(f),
            b.push(a={nm:f.name,src:—Ñ,sz:f.size}),
            —Ñ)
            :b[I].src,
          a,
          i)
        if(++i>=F.length)clearInterval(x),de&&o.lr(ÂõæÁâá,1)},100)
      o.F=F}
    else o.mn.up=0},
  add:function(src,a,i){
    var cp=c.position,P=((cp.x+o.S/2)/o.S+1+'')[0],p=o.ob3.clone()
    a?(
      u.ap(
        u.new('div',{
          innerHTML:'<img src='+src+'><label>'+a.nm+'<br>'+o.mez(a.sz),
          onclick:u.f('o.add(this.children[0].src)')}),
        ÂõæÁâá),
      !i&&(
        o.mn.up?
          o.mn.—Ñ(src)
        :o.add(src)))
      :o.mn.up?
        o.mn.—Ñ(src)
        :(
        t.ad({
        a:'10 20['+src+'] ',
        p:P>0?
          t.s.children[P]||p
          :p,
        gp:t.s}),
        setTimeout(function(v,i,g,o){
          v=(g=(o=t.shape).geometry).vertices
          v[0].x=v[0].y=10,v[2].y=(v[1].x=90)+100
          dr.rsz.centre(t.shape)
          o=o.position
          o.x=cp.x
          o.y=cp.y
          o.z=cp.z-200
          cp.y+=.1
          cp.z+=.1},10))},
  cc:function(){
    var c=t.s.__lights[0].color
    c.r=c.g=c.b=this.value/100},
  ld:u.f('e','alert(e||"100% ?")'),
  dwn:function(n){
    o.a.download='casa#'+n+' ('+new Date().toUTCString().split(/, | GMT/)[1]+').zip'
    if(h.nv.msSaveBlob)h.nv.msSaveBlob(blb,o.a.download)
    else{
      clickEvent=u.d.createEvent('MouseEvent')
      clickEvent.initMouseEvent('click',1,1,h.w,0,0,0,0,0,0,0,0,0,0,null)//type, canBubble, cancelable, view,  detail, screenX, screenY, clientX, clientY,  ctrlKey, altKey, shiftKey, metaKey,  button, relatedTarget
      o.a.dispatchEvent(clickEvent)}},
  str:function(P){
    var x,g,s='',m,M,f,r,p,rt,i,v
    x=t.s.children[1].children[P]
    p=x.position
    r=x.rotation
    if(g=x.geometry)s=g.width/100+' '+g.height/100
    else{s=''
      i=(x=x.children).length
      v=(x=x[0]).geometry
      if(i>1){
        s+='B'+v.width/100+' '+v.height/100+' '+v.depth/100+' x'+i}
      else{
        v=v.vertices
        for(i in v)s+=Number((v[i].x/100).toFixed(6))+','+Number((v[i].y/100).toFixed(6))+' '
        s=s.slice(0,-1)}}
    m=(M=x.material).map
    f=/img\/(.*)\./.exec(m.sourceFile)[1]
    rp=(rp=m.repeat.x)!=1?' '+rp:''
    s+='['+f+rp+']'
    function d(l,a){
      if(l||a)l=(a==1?'':' ')+Number((l/100).toFixed(6))
      return l||''}
    p=(p.x||p.y)?d(p.x,1)+d(p.y,2)+d(p.z):''
    s+=p
    function rt(l,y){// Œ±œáŒ∂ŒπœÉ –∞–∫—Å—ã—Å
      if(l){var i=l<0?'-':''
        l=' '+i+(/1.57/.test(l)?
          'p'
          :'P')+(y||'')}
      return l||''}
    œá=rt(r.x)//rotation x
    Œ≥=rt(r.y,'y')//rotation y
    s+=œá+Œ≥+(M.side==2?'':'.')+'_'
    rz+=s},
  zip:function(){
    return zip&&zip.method&&zip.method.deflate},//compress
  exp:function(){//export option: house as js inside zip
    if(o.zip()){
      if(t.s.children.length-1){
        var p=((c.position.x+o.S/2)/o.S+1+'')[0],s,i//position,scene,iterator
        u.c(p=p>0?p:1)
        /*cpx=camera.position.x, o.S=510
        why offset=cpx+255?
        [ . ] I'd say such "dot" is .5 or 50% but actually it's... 0 "just like vertices work" center
              but I wanted it to be like [   ] "dot starts in left square-bracket"
              so, I set as offset its half which actually is 255 "see: o.S"
        Y offset/510?
            'coz I wanted it to set every house apart referenced by cpx
        Y you added 1 to last result?
          'coz I have no house starting at 0 position and also 'coz I cannot let user see h0, h1, h2 "it feels freaky, doesn't it?"
        Y u ended up enclosing it in Quotation marks?
          strings may be treated as vector whilst number not
          that way I'll get very first number #
          and therefore user'd do two things:
            1) now in which current house he/she is
            2) export file like so: casa# dateInfo.zip */
        //o.str(p)//spawn string providing its position
        rz='',s=t.s.children
        s=s[p]||s[s.length-1]
        for(i in s.children)o.str(i)
        s=o.hs.ch[p-1]//final string
        x=new Blob([rz.slice(0,-1)]/*[#-1] 'cuz it'd never be 0*/,{type:o.ap+'JavaScript'})//house,mimeType
        x.name='casa3d.js'
        zip.createWriter(
          new zip.BlobWriter(o.ap+'zip'),
          function(e){
            zipWriter=e
            zipWriter.add(
              x.name,
              new zip.BlobReader(x),
              function(){
                //u.c('success reading blob')
                o.a.hidden=0
                zipWriter.close(function(e){
                  o.a.href=o.URL(blb=e)
                  o.dwn(p)})})})}//since 0-->1, this way I'll now current house
      else 0}//in order to download house, first add one or upload your own.
    else o.ld()},
  imp:function(s,f){//string, file
                                //510
    var p,n,l=h.ntH.children.length,S=o.S*l//space between each house h.ntH (its container) has got -40 in x axis, though
    t.ad({a:t.eval(s),p:p=o.ob3.clone(),gp:t.s})
    c.position.set(p.position.x=S,1e3,1700)//1700 so that camera can display almost all houses&numbers
    c.rotation.set(0,0,0)//make me sure that camera is infront of them
    h.ntH.add(n=new T.Mesh(new T.TextGeometry(l+1,o.tdp(1,100)),o.mt))//number
    n.position.x=S-(l>8?30:0)
    f&&(//if it comes from file reader then it means it's new
      o.hs.ch.push({raw:s,name:f.name,size:f.size}),
      o.hs.slot(f.name,f.size))},
  ext:function(F){//extract house from zip
    if(F&&F[0]&&o.zip()){var i,c=o.hs.ch,z=F[0]//zipped file
      for(i in c)if(z.size==c[i].size)return
      zip.createReader(
        new zip.BlobReader(z),
        function(zr){//on read end
          zr.getEntries(function(e){//entries
            if(e=e[0])e.getData(
              new zip.BlobWriter(),
              function(blob){
                fr=new FileReader()
                fr.onload=function(){
                  o.imp(
                    this.result,
                    z)}
                fr.readAsText(blob)},null)})})}
      else o.ld()},
  o:{id:''},
  init:function(){console.clear()
    var l,op,p,i,w,n,U,d='div',D,b='button',
    f=function(T,s,i,t,l,S){s=s.split('.'),S='';for(l in s)S+='<'+T+(i?' id='+i+(t?' title='+t:''):'')+'>'+s[l]+'</'+T+'>';return S},
    B=function(s,i,t){return f(b,s,i,t)},
    D=function(s,i,t){return f(d,s,i,t)}
    a=function(t,a,p,c){//tag, attrs, parent
      u.ap(u.new(t,p?a:0),p?p:a)}

    h.ga.add(o.added=o.ob3.clone())
    o.added.add(o.grH=new T.GridHelper(1e4,40))
    o.grH.position.y=-.9

    h.tls.innerHTML+=D(B('‚ûï')+B('¬´')+D(D('','ÂõæÁâá'))+B('¬ª'),'th')
    a(b,{id:'tg',innerHTML:'üåÑ'},th)
    a(d,{id:'mn',innerHTML:D('üîÖ<input id=lit type=range>ÓäÑ')+D('')},h.tls)
    op=mn.children[1]
    for(l in o.e)a(b,{innerHTML:o.e[l]},op)
    a('input',{type:'number'},op)

    //Âú∞ÁÇπ: location (D√¨di«én)
    l=D('<input><input>')
    u.ap(u.new('div',{id:'Âú∞ÁÇπ',innerHTML:D(B('ÓÑπ')+B('üîò'))+l+l+l}),mn)

    h.tls.innerHTML+=D(B('‚ñ©','tg')+D('','Â∏à‰∏Ä')+D('','Â∏à‰∫å'),'Â§ßÂ∏à')
    lit.value=100
    o.mn(b)//contextMenu
    x=[Â∏à‰∏Ä,Â∏à‰∫å,th,mn,opsMenu]
    for(i in x)u.tc(x[i],'c')
    //u.c('p:'+p+', w:'+w)
    p=(U=o.usrAgnt)[/(Chrome|Trident|Firefox)/.exec(h.nv.userAgent)[0]],w=p=='webkit',n=w?16:p=='ms'?15:20
    u.sty('#cnt>*+*{height:'+(w?76:85)+'%}#mn{font-size:1.5em;top:11%;width:'+n+'%;background-image:linear-gradient(90deg,rgba(0,0,0,.3),rgba(255,255,255,.3)93%,rgba(0,0,0,.6))}#th,#Â∏à‰∫å{background-image:linear-gradient(rgba(255,255,255,.2),rgba(0,0,0,.5)90%,rgba(255,255,255,.5))}#lit{width:60%}#edt '+b+':not(#tg){color:rgba(255,255,255,.8)}'+(w?'':'#mn button:not(#tg){margin:-.11em}')+'#mn>:first-child,#Âú∞ÁÇπ>*~*{color:#FD0}#mn #tg{left:100%;top:39%}input[type=number]{margin-left:2em;top:-.8em;width:3.5em}#Âú∞ÁÇπ>:nth-child(1)>*,#opsMenu>:nth-child(-n+2){box-shadow:#000 0 -2px 10px;width:50%}#Âú∞ÁÇπ>:nth-child(2):before{content:"X "}#Âú∞ÁÇπ>:nth-child(3):before{content:"Y "}#Âú∞ÁÇπ>:nth-child(4):before{content:"Z "}#Âú∞ÁÇπ input{width:40%'+(w?';font-size:1.25em':'')+'}#Â§ßÂ∏à{height:'+(w?77:88)+'%;right:0;width:40%}#tg{color:rgba(0,0,0,.2);padding:0}#Â§ßÂ∏à>#tg{top:45%}#Â∏à‰∏Ä{width:25%}#Â∏à‰∫å{width:70%}#Â∏à‰∫å>*{height:'+100/9+'%;width:100%}#Â∏à‰∏Ä>*,#Â∏à‰∫å>*>*{border:5px solid transparent}#Â∏à‰∏Ä>*{height:9.5%;width:91.5%}#Â∏à‰∏Ä>*>*{width:100%}#Â∏à‰∏Ä label{display:inline-block;top:-'+(w?3:4)+'5%}#Â∏à‰∫å{top:0;height:900%}#Â∏à‰∫å>*~*>*{height:14.15%;width:21.63%}#Â∏à‰∫å>*~*>:first-child{height:16.5%;width:96.2%}#Â∏à‰∫å>*~*>:nth-child(n+2):nth-child(-n+3){height:29.76%}#Â∏à‰∫å>*~*>:nth-child(10){height:14.15%;width:46.2%}#Â∏à‰∫å>*~*>:nth-child(11){height:29.84%;width:46.2%}#th{top:0;height:11%}#th>div{width:85%}#th>button:not(#tg),#Â§ßÂ∏à>#tg{width:5%;z-index:1}#th>#tg{left:48.5%;top:-15%}#Â∏à‰∫å>:first-child>*{width:95%}#Â∏à‰∫å button{width:20%}#Â∏à‰∫å input{border:0;height:0;opacity:0;width:0}#Â∏à‰∫å>:first-child>:nth-child(odd){background:rgba(0,0,0,.1)')
    setTimeout(function(){var i,l,x,I=o.img,lng=I[u.lng=='es'?'es':'en'],I=I._id,g=function(e,t){return e.getElementsByTagName(t)}
      u.a=!u.a
      for(l in I){Œπ=I[l],L=0
        u.sty('.'+o.ŒµŒª[l]+'{top:-'+l+'00%')
        a('div',{innerHTML:(l==0?B('ÓÑΩ'):'<img src=img/'+Œπ+'0.jpg>')+'<label>'+lng[l],onclick:u.f('u.gc(this,"‰∏≠"),Â∏à‰∫å.className="'+o.ŒµŒª[l]+'"')},Â∏à‰∏Ä)
        u.ap(x=u.new('div'),Â∏à‰∫å)
        if(l==0)x.innerHTML=D(B('üé®.ÓÑè.üíæ.‚ìò.üîí')),u.ap(o.hs.cp,x.firstChild),u.tc(x,'c')
        else while(L<15)a('img',{src:'img/'+Œπ+(L++)+'.jpg',onclick:o.img.add},x)}
      u.sc(Â∏à‰∏Ä.firstChild,'‰∏≠')

      lit.onchange=o.cc
      bs=g(mn,b)//buttons
      for(l in o.op)bs[l].onclick=o.op[l]
      a(b,{innerHTML:'üèÉ',id:'tg'},mn)
      u.at(o.vl=bs[5].nextSibling,{value:1,step:.25,onchange:o.vlz})
      D=g(Âú∞ÁÇπ,'input')
      m[0]=D[0],m[1]=D[2],m[2]=D[4]//position xyz
      m[3]=D[1],m[4]=D[3],m[5]=D[5]//rotation xyz

      u.sty('#edt button:not(#tg):hover{background:rgba(255,255,255,.2);text-shadow:#000 -15px 10px 7px;color:#FFF}#opsMenu{background:radial-gradient(rgba(12,175,124,.5),rgba(24,55,74,.8));border-radius:5px;left:0;top:0;width:10%}#opsMenu>:nth-child(3),#opsMenu>:last-child{width:100%}#opsMenu>button:nth-child(n+4):nth-child(-n+6){width:33%}#ÂõæÁâá>:nth-child(even) *+*,#Â∏à‰∏Ä label{background:rgba(0,0,0,.5)}#Â∏à‰∫å img:active,.‰∏≠{-'+p+'-transform:rotateY(5deg)}#ÂõæÁâá{width:1000%}#ÂõæÁâá>*{width:1%}#th label{top:-30%;display:inline-block}#th label:hover{top:-104%}#fs,canvas,'+b+',#edt{-'+p+'-user-select:none}#ÂõæÁâá>:nth-child(odd) *+*{background:rgba(255,255,255,.7);text-shadow:#000 0 0 0;color:#000}#Â∏à‰∏Ä>*:hover,#Â∏à‰∫å>*>*:hover{border:5px solid rgba(0,0,0,.5)}#mn,#opsMenu *{left:0;padding:0}.‰∏ä{top:-11%}.Â∑¶{left:-'+n+'%}.ÊùÉ{right:-38%}.Áúã{text-shadow:cyan -5px 5px 5px')

      i=0,x=g(th,b),tg=[mn.lastChild,th.lastChild,Â§ßÂ∏à.firstChild]
      while(i<x.length-1)x[i].onclick=u.f(i?'o.lr(ÂõæÁâá,'+(i-1)+')':'o.i.click()'),tg[i].onclick=u.f('u.tc(this.parentNode,"'+o.zhCL[i++]+'")')
      o.i=o.in('image/*','o.rb',1)
      o.iz=o.in(o.ap+'zip','o.ext')//extract zip
      b2=g(Â∏à‰∫å,'button')
      for(i in o.hs.fn)u.at(b2[i],{onclick:o.hs.fn[i],title:o.hs.tt[i]})
      //u.sc(th,'‰∏ä'),u.sc(mn,'Â∑¶'),u.sc(Â§ßÂ∏à,'ÊùÉ')
      o.yan=bs[1]

      u.at(U,
        {is:(b=bs[4]).i=p+(p=='webkit'?'Is':'')+U.f,
        ca:b.c=p+'Cancel'+U.f,
        rq:b.r=p+'Request'+U.f})
      o.x={49:tg[0],50:tg[1],51:tg[2],98:b2[4],99:bs[5],103:b2[2],105:b2[3],122:b2[1]}
      o.dv=[mn,th,Â§ßÂ∏à]
      o.ae(u.d,
        {contextmenu:function(e){
          if(!edt.className){var r,s,c='no'
            e.preventDefault(),e.stopPropagation()
            /*!dr.app&&dr.act()*/
            r=dr.rc(e,dr.xy(e))
            if(r&&(o.mn.o=r=r.object)&&r.id!=6){s=o.mn.style,c=''
              s.left=e.clientX+'px'
              s.top=e.clientY+'px'}
            o.mn.up=!u.sc(o.mn,c)}},
        keydown:function(e){//escapeKey toggle event
          if(e.which==52){var i,x=o.zhCL
            //u.c(e)
            for(i in x)u.tc(o.dv[i],x[i])}},
        keypress:function(e){
          if(!edt.className){var k=e.which//or charCode but keyCode thx Firefox
            o.x[k]&&o.x[k].click()}}})
      setTimeout(function(){var s=
        t.eval('Gira un ¬º de vuelta hacia la izquierda\n                           ‚áß+ÓÑí_'+
          'Activa/Desactiva la Exploraci√≥n\n                      esc_'+
          'Gira un ¬º de vuelta hacia la Derecha\n                          ‚áß+‚ûî_'+
          'Activa/Desactiva la Edici√≥n de los Objetos\n                               M_'+
          'Alterna el Modo de Pantalla\n                 fn+F11_'+
          'Alterna entre C√°maras A B\n                   C_'+
          'Reinicia todos los Ejes de la Posici√≥n_'+
          'Reinicia todos los Ejes de la Rotaci√≥n')
        for(l in s)bs[l].title=s[l]
        o.vl.title='Ajusta la Velocidad de la C√°mara'},1e3)},1e3)}}
o.init()