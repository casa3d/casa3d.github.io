m={地点:function(){m[0]&&(m[0].innerHTML=m.f(m.P.x),m[1].innerHTML=m.f(m.P.y),m[2].innerHTML=m.f(m.P.z))},c:c.rotation,i:1,cn:0,P:c.position,rKey:!1,WASD:{28:1,50:2,31:3,46:4},sty:".idle{cursor:url(css/cr.cur),auto}trgt{height:40px;left:50%;opacity:.4;position:fixed;top:50%;width:40px}trgt:before{content:'⌖';font-size:5em;left:-50%;position:relative;text-shadow:#FFF 1px 1px 6px;top:-125%}.not{opacity:0",f:function(m){return Number(m.toFixed(2))},act:function(){m.rKey=m.rKey?(u.tg&&(u.tg.classList.add("not"),dr.o&&(dr.app=!0)),m.x=void 0,m.ApprX=!1):m.once=!(u.tg&&(u.tg.classList.remove("not"),dr.m&&dr.m.emissive.g&&(dr.m.emissive.g--,dr.o=void 0),dr.app=!1)),"idle"!=u.b.className&&(u.b.className="idle")},rq:function(t){requestAnimationFrame(t),!m.c&&(m.c=c.rotation)},a:function(){m.ρ(),m.Р=[-xF||0,zF,xF,-zF||0,-xF||0]},rt:function(t){m.r(m.ρκ=t)},r:function(){m.ρκ&&2!=m.ρκ||(m.cn<30?(m.rq(m.r),crYX=m.π/30*(m.ρκ?-1:1),m.c.y+=crYX,m.cn++):m.a(m.cn=0,(m.c.x+"").match("e")&&(m.c.x=0),(m.c.y+"").match("e")&&(m.c.y=0),(m.c.z+"").match("e")&&(m.c.z=0)))},y:function(){m.onceY&&(m.rq(m.y),m.P.y+=(m.K-1?-5:5)*m.i)},Ρ:function(){m.ApprX&&(m.rq(m.Ρ),c.rotation.y+=m.X?-.0125:.0125)},xy:function(t,n){return m.P.z+=t*m.i,m.P.x+=n*m.i},p:function(){m.onceKey&&(m.rq(m.p),m.xy(m.Р[m.kF],m.Р[m.kF+1]))},z:function(){m.ApprN&&(m.rq(m.z),m.ρ(),m.xy(zF,xF))},k:function(m){return m.keyCode-30},ρ:function(){if(zF=-5,rF=c.rotation.y,(rtmp=Math.abs(rF))>m.Π){for(LF=0>rF?-1:1,rF=rtmp;rF>m.Π;)rF-=2*m.Π;rtmp=Math.abs(rF*=LF)}LF=rF>0?-1:1,f0=5/m.π*rtmp,zF+=f0,xF=(f0>5?10-f0:f0)*LF},init:function(){m.π=(m.Π=Math.PI)/2,u.sty(m.sty),"undefined"!=typeof dm&&u.ap(u.tg=u.new("trgt",{className:"not"+(u.a?"":" no")}),"body")}},onmousemove=function(t){if(u.a){var n=m.X=t.clientX,e=m.x;m.rKey&&(c.rotation.y+=n>e?-.025:e>n?.025:0,0>=n||n>=innerWidth-2?e!=n&&(m.ApprX=!0,m.Ρ(n)):m.ApprX&&(m.ApprX=!1)),e!=n&&(m.x=n)}},onkeydown=function(t){if(u.a){var n=m.k(t)-7;t.shiftKey||t.ctrlKey||!(n>-1&&4>n||m.WASD[n])?t.altKey?150==n||152==n?(_k=152>n,m.i+=m.i>1?_k?1:-1:1==m.i?_k?1:-.5:_k?m.i:-m.i/2):t.ctrlKey?m.i=-Math.abs(m.i):m.once&&m.rKey&&(m.ApprN=!(m.once=!1),m.z()):t.ctrlKey?(1==n||3==n)&&!m.onceY&&(m.onceY=!0,m.y(m.K=n)):45==n?m.act():150==n||152==n?(_k=152>n,m.i+=m.i>1?_k?1:-1:1==m.i?_k?1:-.5:_k?m.i:-m.i/2):"ce"!==u.d.activeElement.className&&-29==n&&(t.preventDefault(),t.stopPropagation()):!m.onceKey&&(m.ρ(),m.Р=[-xF,zF,xF,-zF,-xF],m.onceKey=!0,m.p(m.kF=4>n?n:m.WASD[n]-1)),m.地点()}},onkeyup=function(t){if(u.a){var n=m.k(t)-7;n>=0&&4>n||m.WASD[n]?t.shiftKey?m.rt(4>n?n:m.WASD[n]-1):m.onceY=m.onceKey=!1:-19==n?m.once=!(m.ApprN=(m.i=Math.abs(m.i),!1)):t.altKey&&-20==n?m.i=Math.abs(m.i):-21==n&&n!=[-3]?m.onceKey=!1:-20==n&&t.shiftKey&&(m.onceY=!1),m.地点()}},m.init()