o={a:u.new("a"),W:innerWidth/100,l0p:innerHeight/10,ap:"application/",asset:asset,fs:"FullScreen",house:[],of:"ho br do gl wa wi wo".split(" "),m:new T.MeshBasicMaterial,ob3:new T.Object3D,sty:"canvas{left:0;top:0}canvas,#opsMenu{position:fixed}#opsMenu{background:rgba(0,0,0,.5);border-radius:4px}#opsMenu>div>*{background:rgba(0,0,0,.5);border-radius:4px}#opsMenu>div>:first-child,#opsMenu>div>:last-child{display:block;margin-left:.7em}#opsMenu>:first-child{margin:0}",S:510,"Î ":Math.PI,"Ï€":Math.PI/2,pl:u.f("a,b","return new T.PlaneGeometry(a,b)"),URL:u.f("b","return URL.createObjectURL(b)"),ae:u.f("e,a","for(var i in a)e.addEventListener(i,a[i])"),tn:{blob:{}},dlg:function(o,e,t){o[e].idx=t?Number(t)+Number(e):e,o[e].onclick=u.f("o.mn.fn[this.idx]()")},mn:function(){var e,n,i=0,r="button div".split(" "),s="ðŸŒ„ âœ–  â¤´ â†© â†ª â¤µ".split(" ");for(u.ap(e=o.mn=u.new("div",{id:"opsMenu"}),u.b),e.rt=u.f("xy,p","dr.o&&dr.o.id!=6&&(dr.o.rotation[xy]=dr.o.rotation[xy]+o.Ï€/2*p)"),e.fn=[u.f("o.in.click(o.mn.up=1)"),function(n){u.sc(e,"no"),(n=dr.o)&&(n.parent.id==o.added.id?o.added.remove(n):t.s.children[1].remove(n))},,"x","y","y","x"];7>i;)u.ap(n=u.new(r[2!=i?0:1],{innerHTML:s[i]}),3>i?e:e.lastChild),n.onclick=3>i?e.fn[i]:u.f('o.mn.rt("'+e.fn[i]+'",'+(5>i?"-":"")+"1)"),i++},tdp:function(o,e){return{curveSegments:1,font:"janda manatee solid",height:o,size:e}},usrAgnt:{Chrome:"webkit",Trident:"ms",Firefox:"moz"},"Î”":[],clear:function(o,e,t){setTimeout(function(){clearInterval(o),u.c(e+"-renderer clock has been cleared")},t)},rb:function(e){for(var t,n,i,r=0;r<e.length;){n=1,t=e[r++];for(var s in o.tn.blob)if(o.tn.blob[s].sz==t.size&&!(n=0))break;o.add(o.Ï†=n?o.URL(t):s,1,t.size,o.mn.up)}i=setInterval(o.R,100),o.clear(i,"image-click",500)},ad:function(e,n){var i=c.position;t.ad({a:"10 20["+(n?e:e.split(/img\/(.*)/)[1])+"] "+o.txt.r[o.txt.r.idx]}),setTimeout(function(o,e,n,r){o=(n=(r=t.shape).geometry).vertices,o[0].x=o[0].y=10,o[2].y=(o[1].x=90)+100,dr.rsz.centre(t.shape),r=r.position,r.x=i.x,r.y=i.y,r.z=i.z-200,i.y+=.1,i.z+=.1},10)},add:function(e,t,n,i){var r,s,a,l,p,d;r=o.tx,e!=o.tx&&(o.txt.r.idx=o.o.parent.id-o.st.rll.children[0].id),o.tx=(t&&36==e.length?"blob:http%3A//localhost%3A3000/":"")+e,t&&36!=e.length&&(e=e.substr(31,e.length-1)),!i&&o.ad(o.tx,t),d=o.tn[e]||o.tn.blob[e],d?(o.tn.o=o.tns.children[d.id],o.txt.get(++d.x+"")):(s=o.pl(o.gw,o.gh),a=o.m.clone(),a.map=Ï†=t?(o.tn.blob[e]={id:o.tns.children.length,sz:n,x:1},T.ImageUtils.loadTexture(o.tx)):(o.tn[e]={id:o.tns.children.length,x:1},o.o.material.map),i&&dr.o&&(o.mn.up=0,dr.o.material.map=T.ImageUtils.loadTexture(o.tx)),o.tns.add(l=new T.Mesh(s,a)),l.position.x=-o.gw*(49-(p=o.tns.children.length))+o.gw/2,l.N=[],p>9&&(o.tns.position.x-=o.gw),o.txt.init(l,0),o.tns.right-=o.gw)},cc:function(){var e=t.s.__lights[0].color;o.o.il?e.b<1&&(e.b+=.15):e.b>.1&&(e.b-=.15),e.r=e.g=e.b},ld:u.f("e",'alert(e||"100% ?")'),dwn:function(e){o.a.download="casa#"+e+" ("+(new Date).toUTCString().split(/, | GMT/)[1]+").zip",h.nv.msSaveBlob?h.nv.msSaveBlob(blb,o.a.download):(clickEvent=u.d.createEvent("MouseEvent"),clickEvent.initMouseEvent("click",1,1,h.w,0,0,0,0,0,0,0,0,0,0,null),o.a.dispatchEvent(clickEvent))},str:function(o){function e(o,e){return(o||e)&&(o=(1==e?"":" ")+Number((o/100).toFixed(6))),o||""}function n(o,e){if(o){var t=0>o?"-":"";o=" "+t+(/1.57/.test(o)?"p":"P")+(e||"")}return o||""}var i,r,s,a,l,p,d,n,c,u,h="";if(i=t.s.children[1].children[o],d=i.position,p=i.rotation,r=i.geometry)h=r.width/100+" "+r.height/100;else{h="",u=(i=i.children[0]).geometry.vertices;for(c in u)h+=Number((u[c].x/100).toFixed(6))+","+Number((u[c].y/100).toFixed(6))+" ";h=h.slice(0,-1)}s=(a=i.material).map,l=/img\/(.*)\./.exec(s.sourceFile)[1],rp=1!=(rp=s.repeat.x)?" "+rp:"",h+="["+l+rp+"]",d=d.x||d.y?e(d.x,1)+e(d.y,2)+e(d.z):"",h+=d,Ï‡=n(p.x),Î³=n(p.y,"y"),h+=Ï‡+Î³+(2==a.side?"":".")+"_",rz+=h},zip:function(){if(zip&&zip.method&&zip.method.deflate){var e=o.o.material.color;return e.r=e.g=e.b=1,o.o=o.menu,1}},exp:function(){if(o.zip())if(o.house.length){var e=((c.position.x+o.S/2)/o.S+1+"")[0];e=e>0?e:1,rz="";for(var n in t.s.children[e].children)o.str(n);s=o.house[e-1],x=new Blob([rz.slice(0,-1)],{type:o.ap+"JavaScript"}),x.name="casa3d.js",zip.createWriter(new zip.BlobWriter(o.ap+"zip"),function(t){zipWriter=t,zipWriter.add(x.name,new zip.BlobReader(x),function(){o.a.hidden=0,zipWriter.close(function(t){o.a.href=o.URL(blb=t),o.dwn(e)})})})}else o.ld(o.fi);else o.ld()},ntH:function(e,n){var i,r,s=o.S*e;t.ad({a:t.eval(n),p:i=o.ob3.clone(),gp:t.s}),c.position.set(i.position.x=s,1e3,1700),c.rotation.set(0,0,0),h.ntH.add(r=new T.Mesh(new T.TextGeometry(e+1,o.tdp(1,100)),o.m)),r.position.x=s-(e>8?30:0),o.house[e]=n},imp:function(e){if(e&&o.zip()){var t=e[0];zip.createReader(new zip.BlobReader(t),function(e){e.getEntries(function(e){(E=e=e[0])&&e.getData(new zip.BlobWriter,function(e){fr=new FileReader,fr.onload=function(){o.ntH(h.ntH.children.length,this.result)},fr.readAsText(e)},null)})})}else o.ld()},mv:function(){o.st.rll.position.x+=o.o.id==o.left.id&&o.st.rll.position.x<o.left.lim?o.pnlW:o.o.id==o.right.id&&o.st.rll.position.x>o.right.lim&&-o.pnlW},R:u.f("o.r.render(o.s,o.c)"),how:function(){var e,t,n,i,r,s;o.kb?o.kb.position.z=o.kb.position.z?0:-1:(e=o.pl(o.W,o.H),t=new T.MeshLambertMaterial,o.s.add(o.kb=new T.Mesh(e,ma=t.clone())),ma.transparent=1,ma.opacity=.5,e=o.pl(),o.kb.add(i=new T.Mesh(e,t)),o.kb.add(r=i.clone()),i.add(james=new T.Mesh(e=o.pl(o.gw,o.gh),t)),i.add(n=james.clone()),i.position.set(3*-o.gw,-o.gh,0),r.position.set(2*o.gw,-o.gh,0),n.position.y=-o.gh/1.9,e=new T.CylinderGeometry(0,.2,.2),t=new T.MeshBasicMaterial,james.add(new T.Mesh(e,t)),e=new T.TextGeometry("ctrl",o.tdp(1e-6,.2)),n.add(s=new T.Mesh(e,t)),s.position.x=-o.gw/5,r.add(n=james.clone()),n.position.y=o.gh/1.9,r.add(n=james.clone()),n.position.x=o.gw/1.3,n.rotateZ(-o.Ï€),r.add(n=james.clone()),n.position.y=-o.gh/1.9,n.rotateZ(o.Î ),r.add(n=james.clone()),n.position.x=-o.gw/1.3,n.rotateZ(o.Ï€),james.position.y=o.gh/1.9)},st:{app:!1,init:function(e){var n,i,r,s,a,l=0,p=[[],[]],d=[[],[]];p[0][3]=-(p[0][0]=3*(p[0][1]=-(p[0][2]=o.gw))),d[0][0]=-(d[0][3]=3*(d[0][2]=-(d[0][1]=o.gh))),p[1][0]=-(p[1][3]=.0123),p[1][1]=d[1][2]=-(p[1][2]=d[1][1]=.00498),d[1][3]=-(d[1][0]=.0085),o.pnlW=o.W-2*o.gw,o.pnlH=o.H-2*o.gh,n=o.pl(o.W,o.pnlH),i=new T.MeshLambertMaterial({opacity:0,transparent:!0,visible:!1}),o.s.add(o.st.pnl=new T.Mesh(n,i)),o.shwm(),o.st.pnl.c=1,n=o.pl(o.pnlW*o.of.length,o.pnlH),o.st.pnl.add(a=o.st.rll=new T.Mesh(n,i)),a.position.set(a.geometry.width/2-o.pnlW,0,1e-4),n=o.pl(o.pnlW,o.pnlH);for(l in o.of){var c=0;i=new T.MeshBasicMaterial({visible:!1}),a.add(r=new T.Mesh(n,i)),r.position.x=3*-o.pnlW+o.pnlW/2+o.pnlW*l,r.c=1}o.f=a.children[0].id,o.l=a.children[o.of.length-1].id,n=o.pl(2*o.gw,2*o.gh);for(l in o.of)for(var c=0;4>c;){var u=1,h=4*c,m=o.of[l];for(s=new T.ImageUtils.loadTexture(t.bs+m+("ho"==m?0:h)+".jpg"),i=new T.MeshBasicMaterial({map:s,opacity:.85,transparent:!0}),a.children[l].add(r=new T.Mesh(n,i)),r.position.set(p[0][c]+p[1][c],d[0][0]+d[1][0],0);4>u;)s=new T.ImageUtils.loadTexture(t.bs+m+("ho"==m?0:u+h)+".jpg"),i=new T.MeshBasicMaterial({map:s,opacity:.85,transparent:!0}),a.children[l].add(r=new T.Mesh(n,i)),r.position.set(p[0][c]+p[1][c],d[0][u]+d[1][u],0),u++;c++}n=o.pl(o.gw,o.pnlH),s=new T.ImageUtils.loadTexture(t.bs+"icon/left.png"),i=new T.MeshBasicMaterial({map:s,opacity:.3,transparent:!0,blending:0,color:"lightgrey"}),o.st.pnl.add(o.left=new T.Mesh(n,i)),o.left.position.set(e,0,.001),o.left.lim=27,o.st.pnl.add(o.right=o.left.clone()),o.right.rotation.z=o.Î ,o.right.position.set(-e,0,.001),o.right.lim=-38}},s:new T.Scene,c:new T.PerspectiveCamera(innerHeight/(768/42),innerWidth/innerHeight,.001,10),r:new T.WebGLRenderer,pj:new T.Projector,V3:new T.Vector3(0,0,.5),o:{id:""},kbd:u.f("o.kb&&(!o.kb.position.z&&(o.kb.position.z=-1))"),shwm:function(){o.st.pnl.position.y=o.st.pnl.position.y?(m.rKey&&m.act(),0):o.H,u.sc(o.mn,"no"),o.kbd()},ops:[0,0,0,function(){var e,t,n,i=o.menu.children;e=o.menu.rotation.z?[(n=1)*o.gw*4.3,0,0]:[0,(n=-1)*o.H/2+1.1*o.gh,o.Ï€],o.menu.rotation.z=e[2],o.menu.position.set(e[0],e[1],0);for(t in i)i[t].rotateZ(n*o.Ï€)},0,u.f("o.in.click()"),dr.act,dr.act,m.rt,u.f("m.rt(2)"),0,0,m.act,u.f("u.d[o.is]?u.d[o.ex]():u.b[o.rq]()"),0,u.f("o.im.click()"),u.f("open(location.href+'support','_new')"),u.f("u.shift(),setTimeout(u.out,100)")],rc:function(e){o.V3.x=e.clientX/innerWidth*2-1,o.V3.y=2*-((o.y=e.clientY)/innerHeight)+1,o.pj.unprojectVector(o.V3,o.c),o.rC=new T.Raycaster(o.c.position,o.V3.sub(o.c.position).normalize()),o.rst=o.rC.intersectObjects(o.s.children,!0);for(var t in o.rst)if(o.rst[t].object.parent.c)return o.rst=o.rst[t];return o.rst=o.rst[0]},slide:function(){var e,t,n;o.app&&(t=o.tns,n=t.position.x,((e=o.x&&n>t.right)||!o.x&&n<t.left)&&(t.position.x-=e?.05:-.05,requestAnimationFrame(o.slide),o.R()))},at:u.f("return o.o.parent.id==o.tn.id||o.o.parent.id>=o.f&&o.o.parent.id<=o.l"),txt:{init:function(e,t){for(var n;10>t;)e.N[t]=[n=new T.Mesh(new T.TextGeometry(t++,o.tdp(1e-6,.2)),o.m)],n.position.x=-.65,n.position.y=.4,e.add(n)},hd:function(e,t){var n=e.length-1,i=o.tn.o.N[e[t=t?n-t:n]][t];i&&.4!=i.position.y&&(i.position.y=.4)},mv:function(e,t){var n=e.length-1,i=o.tn.o,r=i.N[e[t=t?n-t:n]];obj=r[t],!obj&&i.add(obj=r[t]=r[0].clone()),obj.position.set(o.Î”[t],.09,0)},lm:[],it:function(e,t,n){0==e[n-t]&&(o.txt.mv(e,t),e>o.txt.lm[t]&&(o.txt.hd(e-1+"",t),o.txt.it(e,t+1,n)))},get:function(e){o.txt.mv(e),o.txt.it(e,1,e.length),o.txt.hd(e-1+"")},r:"p  p p".split(/|/)},init:function(){function e(e){r=new T.ImageUtils.loadTexture(t.bs+"icon/menu.png"),r.repeat.y=.0625,r.offset.y=.0625*(2*d+e),i=new T.MeshBasicMaterial({map:r,transparent:1}),s=new T.Mesh(n,i),s.position.set(.3*o.gw*(e?1:-1),o.gh*(3.5-d),0),o.menu.add(s)}var n,i,r,s,a,l,p,e,d=0;for(o.gh=(o.H=o.l0p/10)/10,o.gw=o.W/10,o.g=o.pl(100,200),o.ops[0]=o.ops[1]=o.mv,o.ops[2]=o.how,o.ops[4]=o.shwm,o.ops[10]=o.ops[11]=o.cc,o.ops[14]=o.exp,h.ga.add(o.added=o.ob3.clone()),o.im=u.new("input",{type:"file",accept:o.ap+"zip",onchange:u.f("o.imp(this.files)")}),o.fi="es"==u.lng?"con el fin de exportar una casa, 1ro debes aÃ±adir o importar alguna":"in order to export house, first you must add one or import your own",o.pfx=o.usrAgnt[/(Chrome|Trident|Firefox)/.exec(h.nv.userAgent)[0]],u.sty(o.sty+="#fs,canvas,button{-"+o.pfx+"-user-select:none"),o.r.setSize(innerWidth,innerHeight),o.c.position.z=10,a=-o.W/2+o.gw/2,l=o.H/2-o.gh/2,o.st.init(a),n=o.pl(96*o.gw,o.gh),i=new T.MeshBasicMaterial({opacity:0,transparent:!0}),o.s.add(o.tns=new T.Mesh(n,i)),o.tns.position.set(o.tns.left=43*o.gw,l,0),o.tns.c=1,o.tns.right=o.tns.left+10*o.gw,n=o.pl(1.25*o.gw,8.5*o.gh),i=new T.MeshLambertMaterial({transparent:1,opacity:.5,blending:0}),o.menu=new T.Mesh(n,i),o.menu.position.set(4.3*o.gw,-o.gh/4,0),o.menu.c=1,o.s.add(o.menu),n=o.pl(o.gw/2,o.gh);8>d;)e(0),e(1),4==d++&&(s.il=1);u.ap(u.at(o.r.domElement,{id:"ops"}),u.b),!u.a&&u.sc(o.r.domElement,"no"),o.mn(),o.is=o.pfx+("webkit"==o.pfx?"Is":"")+o.fs,o.ex=o.pfx+"Cancel"+o.fs,o.rq=o.pfx+"Request"+o.fs,o.tn.id=o.s.children[1].id;for(d in o.ops)o.ops[Number(d)+(2>d?o.left.id:o.tn.id)]=o.ops[d],delete o.ops[d];for(d in o.of)o.Î”[d]=-.62+.15*d,o.txt.lm[d]=2*Math.pow(10,d)-1;o.in=u.new("input",{type:"file",accept:"image/*",multiple:1,onchange:u.f("o.rb(this.files)")}),p=setInterval(o.R,500),o.clear(p,"ops",6e3),o.re=RegExp(o.left.id+"|"+o.menu.children[0].id+"|"+o.menu.children[2].id+"|"+o.right.id)}},o.init(),o.ae(ops,{click:function(){var e,n=o.o.id;n&&(o.ops[n]?o.ops[n]():o.at()&&(o.o.parent.id==o.f?o.ntH(t.s.children.length-1,o.asset):(e=o.o.material.map.sourceFile)&&o.add(e,/blob/.test(e)))),!o.st.pnl.position.y&&!o.re.test(n)&&o.shwm(),n!=o.left.id&&n!=o.right.id&&u.clk(o.zip),o.R()},contextmenu:function(e){e.preventDefault(),e.stopPropagation(),!dr.app&&dr.act(),u.clk(function(){u.sc(o.mn,dr.o&&6!=dr.o.id?(o.mn.setAttribute("style","left:"+e.clientX+"px;top:"+e.clientY+"px"),""):"no")})},mousemove:function(e){(o.x=e.clientX)<1||o.x>innerWidth-2?!o.app&&o.slide(o.app=1):o.app&&(o.app=0),o.rc(e)?o.o.id!=o.rst.object.id&&(o.o.id&&(o.at()?(o.o.position.z=0,o.o.material.opacity=.85):o.mc&&((o.mc=o.o.material.color).r=o.pc[0],o.mc.g=o.pc[1],o.mc.b=o.pc[2])),o.o=o.rst.object,o.at()?(o.o.position.z=.125,o.o.material.opacity=1):!o.o.parent.N&&(o.mc=o.o.material.color,o.pc=[o.mc.r,o.mc.g,o.mc.b],o.mc.r=o.mc.g=o.mc.b=0),o.R()):o.o.id!=o.menu.id&&(o.o=o.menu)},resize:u.f("o.r.setSize(innerWidth,innerHeight)")})