t={bs:f.bs+"img/",eval:function(e){return e.split("_")},pf:function(e){return parseFloat(e)},mpf:"",pF:function(e){return t.pf(e)*(t.mpf?Math.pow(10,t.mpf):1)},pr:function(e){var s;t.mpf=2,noR=/[xyzpP]/.test(e),e=e.split(" "),B=[],ofs=[,"y","z"],""==e[0]&&(B[0]=B[1]=B[2]=0,e.shift());for(s in e)if(bl=B.length,bi=e[s],bl=(lt=/[yz]/.exec(bi))?ox=ofs.indexOf(lt[0])+(2==bl?bl+1:bl):/[xpP]/.test(bi)&&3>bl&&""!=bi[bi.length-1]?3:bl,B[bl]=(pexb=/[pP]/.exec(bi))?t.pf(bi.replace(pexb,Math.PI/("p"==pexb?2:1))):/[xyz]/.exec(bi)?t.pf(bi.substring(0,bi.length-1)):t.pF(bi)||0,s++,5==bl)break;for(s=0;bl>=s;)void 0==B[s]?B[s]=0:0,s++;for(bl=B.length;6>bl;)B[bl++]=0;return B},ad:function(e){"object"!=typeof e.a&&(e.a=[e.a]);for(t.i in e.a)if(shape=e.a[t.i],sh=shape.split(/[\[\]]/),sh0=sh[0]=sh[0].replace(BGexec=/[BPS]|/.exec(sh[0]),"").split(")"),sh=[/\|/.test(sh[0])?v.v(sh[0][0],t.pf(sh[0][1])):/\,/.test(sh[0])?v.v2(v.a=sh[0][0].split(" ")):sh[0][0].split(" "),sh[1].replace(BMexec=/[BDFLNP]|/.exec(sh[1]),"").split(" "),t.pr((dt=(sh2=sh[2]).search(/\.$/)+1)?(s2=!0,sh2.substr(0,dt)):(s2=!1,sh2))],tx=sh[1][0]&&!/[|,]/.test(sh[1][0])?T.ImageUtils.loadTexture((/blob/.test(sh[1][0])?"":t.bs)+sh[1][0]+(/jpg|png|webp|blob|jpeg/.test(sh[1][0])?"":".jpg")):null,sh[1].length>1&&(tx.repeat.set(t.pf(sh[1][1]),t.pf(sh[1][1])),tx.wrapS=tx.wrapT=T.RepeatWrapping),shape=/[|,]/.test(sh0)?T.SceneUtils.createMultiMaterialObject(new T.ShapeGeometry(new T.Shape(sh[0])),[new T.MeshLambertMaterial({map:tx,side:s2?"":2})]):(sh00=100*t.pf((sh0=sh[0])[0]),sh01=100*t.pf(sh0[1]),sh02=100*t.pf(sh0[2]),BG="B"==BGexec[0]?new T.CubeGeometry(sh00,sh01,sh02):"S"==BGexec[0]?new T.SphereGeometry(sh00,sh01,sh02):new T.PlaneGeometry(sh00,sh01),BM="P"==BMexec[0]?new T.MeshPhongMaterial:"B"==BMexec?new T.MeshBasicMaterial:new T.MeshLambertMaterial,sh[1][0]&&("!|"==sh[1][0]?BM.visible=!1:BM.map=tx),BM.side=s2?"":2,new T.Mesh(BG,BM)),shape.position.set((sh2=sh[2])[0],sh2[1],sh2[2]),shape.rotation.set(sh2[3],sh2[4],sh2[5]),e.p=e.p||o.added,t.shape=shape,"B"==BGexec&&(a=sh0[3])){var s,h=shape.clone(),p=h.position,i=0,a=sh0[3].slice(1,sh0[3].length);for(s=new T.Object3D,s.position.set(p.x,p.y,p.z),h.position.set(0,sh01,-sh02);i++<a;)s.add(h=h.clone()),h.position.y-=sh01,h.position.z+=sh02;e.p.add(s)}else e.p.add(shape);e.gp&&e.gp.add(e.p)}}