m={c:c.rotation,d:document,i:1,cn:0,rKey:!1,w:window,W:innerWidth,WASD:{28:1,50:2,31:3,46:4},sty:".idle{cursor:url(../cur/cr.cur),auto}trgt{background:url(img/icon/trgt.png)0/contain;height:40px;left:50%;opacity:.4;position:fixed;top:50%;width:40px}.not{opacity:0}",trgt:function(){var t=$("style")[0];m.π=(m.Π=Math.PI)/2,t?t.innerHTML+="\n"+m.sty:$(m.d.head).append($("<style>").text(m.sty)),$(m.d.body).append($("<trgt class=not>"))},act:function(){m.rKey=m.rKey?($("trgt").addClass("not"),m.x=void 0,dr.o&&(dr.app=!0),m.ApprX=!1):m.once=($("trgt").removeClass("not"),"idle"!=m.d.body.className&&(m.d.body.className="idle"),dr.m&&dr.m.emissive.g&&(dr.m.emissive.g--,dr.o=void 0),!(dr.app=!1))},rq:function(t){requestAnimationFrame(t),!m.c&&(m.c=c.rotation)},a:function(){m.ρ(),m.Р=[-xF||0,zF,xF,-zF||0,-xF||0]},rt:function(t){m.r(m.ρκ=t)},r:function(){m.ρκ&&2!=m.ρκ||(m.cn<30?(m.rq(m.r),crYX=m.π/30*(m.ρκ?-1:1),m.c.y+=crYX,m.cn++):m.a(m.cn=0,(m.c.x+"").match("e")&&(m.c.x=0),(m.c.y+"").match("e")&&(m.c.y=0),(m.c.z+"").match("e")&&(m.c.z=0)))},y:function(){m.onceY&&(m.rq(m.y),c.position.y+=(m.K-1?-5:5)*m.i)},Ρ:function(){m.ApprX&&(m.rq(m.Ρ),c.rotation.y+=m.X?-.0125:.0125)},xy:function(t,n){return c.position.z+=t*m.i,c.position.x+=n*m.i},p:function(){m.onceKey&&(m.rq(m.p),m.xy(m.Р[m.kF],m.Р[m.kF+1]))},z:function(){m.ApprN&&(m.rq(m.z),m.ρ(),m.xy(zF,xF))},k:function(m){return m.keyCode-30},ρ:function(){if(zF=-5,rF=c.rotation.y,(rtmp=Math.abs(rF))>m.Π){for(LF=0>rF?-1:1,rF=rtmp;rF>m.Π;)rF-=2*m.Π;rtmp=Math.abs(rF*=LF)}LF=rF>0?-1:1,f0=5/m.π*rtmp,zF+=f0,xF=(f0>5?10-f0:f0)*LF}},$(m.d).on({mousemove:function(t){if(u.a){var n=m.X=t.clientX,i=m.x;m.rKey&&(c.rotation.y+=n>i?-.025:i>n?.025:0,0>=n||n>=m.W-2?i!=n&&(m.ApprX=!0,m.Ρ(n)):m.ApprX&&(m.ApprX=!1)),i!=n&&(m.x=n)}},keydown:function(t){if(u.a){var n=m.k(t)-7;t.shiftKey||t.ctrlKey||!(n>-1&&4>n||m.WASD[n])?t.altKey?150==n||152==n?(_k=152>n,m.i+=m.i>1?_k?1:-1:1==m.i?_k?1:-.5:_k?m.i:-m.i/2):t.ctrlKey?m.i=-Math.abs(m.i):m.once&&m.rKey&&(m.ApprN=!(m.once=!1),m.z()):t.ctrlKey?(1==n||3==n)&&!m.onceY&&(m.onceY=!0,m.y(m.K=n)):45==n?m.act():150==n||152==n?(_k=152>n,m.i+=m.i>1?_k?1:-1:1==m.i?_k?1:-.5:_k?m.i:-m.i/2):"ce"!==m.d.activeElement.className&&-29==n&&(t.preventDefault(),t.stopPropagation()):!m.onceKey&&(m.ρ(),m.Р=[-xF,zF,xF,-zF,-xF],m.onceKey=!0,m.p(m.kF=4>n?n:m.WASD[n]-1))}},keyup:function(t){if(u.a){var n=m.k(t)-7;n>=0&&4>n||m.WASD[n]?t.shiftKey?m.rt(4>n?n:m.WASD[n]-1):m.onceY=m.onceKey=!1:-19==n?m.once=!(m.ApprN=(m.i=Math.abs(m.i),!1)):t.altKey&&-20==n?m.i=Math.abs(m.i):-21==n&&n!=[-3]?m.onceKey=!1:-20==n&&t.shiftKey&&(m.onceY=!1)}}}),m.trgt();