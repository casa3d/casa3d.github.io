t={bs:"img/",pf:function(e){return parseFloat(e)},mpf:"",pF:function(e){return t.pf(e)*(t.mpf?Math.pow(10,t.mpf):1)},pr:function(e){var s;t.mpf=2,noR=/[xyzpP]/.test(e),e=e.split(" "),B=[],ofs=[,"y","z"],""==e[0]&&(B[0]=B[1]=B[2]=0,e.shift());for(s in e)if(bl=B.length,bi=e[s],bl=(lt=/[yz]/.exec(bi))?ox=ofs.indexOf(lt[0])+(2==bl?bl+1:bl):/[xpP]/.test(bi)&&3>bl&&""!=bi[bi.length-1]?3:bl,B[bl]=(pexb=/[pP]/.exec(bi))?t.pf(bi.replace(pexb,Math.PI/("p"==pexb?2:1))):/[xyz]/.exec(bi)?t.pf(bi.substring(0,bi.length-1)):t.pF(bi)||0,s++,5==bl)break;for(s=0;bl>=s;)void 0==B[s]?B[s]=0:0,s++;for(bl=B.length;6>bl;)B[bl++]=0;return B},ad:function(e,s){"object"!=typeof e&&(e=[e]);for(t.i in e)(shape=e[t.i])instanceof T.AmbientLight||(sh=shape.split(/[\[\]]/),sh0=sh[0]=sh[0].replace(BGexec=/[BPS]|/.exec(sh[0]),"").split(")"),sh=[/\|/.test(sh[0])?v.v(sh[0][0],t.pf(sh[0][1])):sh[0][0].split(" "),sh[1].replace(BMexec=/[BDFLNP]|/.exec(sh[1]),"").split(" "),t.pr((dt=(sh2=sh[2]).search(/\.$/)+1)?(s2=!0,sh2.substr(0,dt)):(s2=!1,sh2))],tx=sh[1][0]&&!/\|/.test(sh[1][0])?T.ImageUtils.loadTexture((/blob/.test(sh[1][0])?"":t.bs)+sh[1][0]+(/jpg|png|webp|blob|jpeg/.test(sh[1][0])?"":".jpg")):null,sh[1].length>1&&(tx.repeat.set(t.pf(sh[1][1]),t.pf(sh[1][1])),tx.wrapS=tx.wrapT=T.RepeatWrapping),shape=/\|/.test(sh0)?T.SceneUtils.createMultiMaterialObject(new T.ShapeGeometry(new T.Shape(sh[0])),[new T.MeshLambertMaterial({map:tx,side:s2?"":2})]):(sh00=100*t.pf((sh0=sh[0])[0]),sh01=100*t.pf(sh0[1]),sh02=100*t.pf(sh0[2]),BG="B"==BGexec[0]?new T.CubeGeometry(sh00,sh01,sh02):"S"==BGexec[0]?new T.SphereGeometry(sh00,sh01,sh02):new T.PlaneGeometry(sh00,sh01),BM="P"==BMexec[0]?new T.MeshPhongMaterial:"B"==BMexec?new T.MeshBasicMaterial:new T.MeshLambertMaterial,sh[1][0]&&("!|"==sh[1][0]?BM.visible=!1:BM.map=tx),BM.side=s2?"":2,new T.Mesh(BG,BM)),shape.position.set((sh2=sh[2])[0],sh2[1],sh2[2]),shape.rotation.set(sh2[3],sh2[4],sh2[5])),(s||t.s).add(t.shape=shape);s&&t.s.add(s)}};