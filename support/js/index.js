s={d:document,cl:'green blue darkcyan goldenrod saddlebrown red grey'.split(' '),l:ops.classList,nv:navigator,wk:new Worker('js/worker.js'),p:'zero one two three four five six'.split(' '),ae:function(e,n,t){t=t||s.ch[e],t.addEventListener('click',function(){n(e)})},bad:function(e){alert(' : (  '+e)},clear:function(){clearInterval(s.clock),send.disabled=!1,send.innerText=s.txt,send.title=s.tt,send.innerText<2&&s.bad('internet ?')},clss:function(e){s.l.remove(s.l[1]),s.l.add(s.cl[e])},send:function(){alert('pending to do')},sld:function(e){roll.className=s.p[e],s.clss(e),s.sv()},log:function(e){console.log(e)},df:function(){return roll.className!=s.rc},sv:function(){s.u&&s.df()&&s.tr({tbl:'users',obj:s.u,cbck:function(){var e=this.result;e.support.section=s.p.indexOf(roll.className),s.ob.put(e)}})},tr:function(e){var n='session',t='users';s.t=s.db.transaction([n,t],'readwrite'),s.t.onerror=function(e){s.log(e)},s.ob=s.t.objectStore(e.tbl),e.tbl==n&&(s.usr=s.t.objectStore(t)),s.rsp=s.ob.get(e.obj),s.rsp.onsuccess=e.cbck},rs:function(e){return e.target.result},idb:function(e){s.idxDB=indexedDB,s.rq=s.idxDB.open('DB',3),s.rq.onupgradeneeded=function(e){dbe=0,s.log('upgrade needed'),s.db=s.rs(e),!s.db&&(s.db.createObjectStore('session',{keyPath:'type'}),s.db.createObjectStore('users',{keyPath:'user.name',autoIncrement:!0}))},s.rq.onsuccess=e},init:function(h){var i=0,em,dbe=1;s.idb(function(e){s.db=s.rs(e),dbe&&s.tr({tbl:'session',obj:'current',cbck:function(){s.dt=s.usr.get(s.u=this.result.user),s.dt.onsuccess=function(){var p=this.result.support.section;s.df(s.rc=s.p[p])&&(roll.className=s.rc,s.clss(p))}}})}),onblur=s.sv,s.ch=ops.children,s.wk.postMessage({ua:/Trident|AppleWebKit|Firefox/i.exec(s.nv.userAgent),lng:s.nv.language,rf:location.href,w:innerWidth,x:4}),s.wk.onmessage=function(e){var d=e.data,x;d.fn?eval(d.fn):(s.ae(d.i,s.sld),s.ch[d.i].title=s.lng[d.i],em=s.d.createElement('div'),em.innerHTML=d.cnt,roll.appendChild(em),0==d.i&&(f=send.parentElement.children,x=new Date,/AppleWebKit/i.test(s.nv.userAgent)?dt.valueAsDate=x:dt.value=x.getFullYear()+'-'+x.getMonth()+'-'+x.getDate(),send.onclick=function(){s.nv.onLine?/\d{4}-\d{1}|\d{2}-\d{1}\d{2}/.test(f[3].value)?f[8].value.length>15?(s.txt=send.innerText,s.tt=send.title,send.disabled=!0,send.innerText=30,send.title=' . . . ',s.clock=setInterval(function(){send.innerText--},1e3),setTimeout(s.clear,3e4),xhr({URL:'php/mailer.php',fn:"s.clear(),alert('OK!')"},{recipient:f[7].value,subject:f[1].value,message:f[8].value,from:f[5].value,dt:f[3].value,lng:s.nv.language})):s.bad(f[8].placeholder+' ...'):s.bad(f[3].placeholder+' ðŸ“…'):s.bad('internet ?')},send.innerHTML='âœ”'))}}},console.clear(),onload=s.init